namespace("R");namespace("R.util");namespace("R.repository");namespace("R.session");(function(){var b=YAHOO.lang.JSON,a=YAHOO.util.Connect;R.util.DeployRTransaction={DEPLOY_R_URL_PATH:"/deployr",SUCCESS:true,FAIL:false,handleSuccess:function(c){this.logRequestOutput(c);if(c.status==200){this.processResult(this.SUCCESS,c)}else{this.handlerFailure(c)}},handleFailure:function(c){this.logRequestOutput(c);this.processResult(this.FAIL,c)},processResult:function(i,h){var j=h.argument;var d=j.scope||this;try{if(i&&j&&j.success){var g=j.format;var c=(g=="json"?b.parse(h.responseText):h.responseText);if(this._isSuccess(c,g)){j.success.call(d,c)}else{if(j.failure&&g=="json"){h.status="STATUS-CODE-UNKNOWN";h.statusText=c.deployr.response.error;j.failure.call(d,h)}}}else{if(!i&&j&&j.failure){j.failure.call(d,h)}}}catch(f){}finally{if(j&&j.notify){j.notify.call(d,h)}}},uploadHandler:function(d){var e=d.argument;if(d.responseText){if(e.success){var c=e.scope||this;e.success.call(c,b.parse(d.responseText))}}else{this.handleFailure(d)}},sendRequest:function(c){c.callback.format=c.params.format;var h={success:R.util.DeployRTransaction.handleSuccess,failure:R.util.DeployRTransaction.handleFailure,upload:R.util.DeployRTransaction.uploadHandler,scope:R.util.DeployRTransaction,argument:c.callback,timeout:20*60*1000,cache:false};var g=c.method||"GET";var d=this.DEPLOY_R_URL_PATH+c.url;var e=this.jsonToNameValue(c.params,g);if(g=="GET"){d+="?"+e;e=null}this.logRequestInput(g,c.url,c.params);if(c.isUpload){g="POST";a.setForm(c.formId,true)}var f=a.asyncRequest(g,d,h,e);return f},logRequestOutput:function(c){},logRequestInput:function(e,c,d){},_isSuccess:function(d,e){var c=true;if(e=="json"){c=d.deployr.response.success}return c},jsonToNameValue:function(e,f){var c=[];var d=function(i){for(var g in i){if(i.hasOwnProperty(g)&&i[g]!=null&&i[g]!=undefined){var h=i[g];if(h==null){continue}if(h instanceof Object){d(h)}c.push(g+"="+(f=="GET"?encodeURIComponent(h):h))}}};d(e);return(c.join("&"))}}})();function namespace(){var b=arguments,g=null,e,c,f;for(e=0;e<b.length;e=e+1){f=b[e].split(".");g=window;for(c=0;c<f.length;c=c+1){g[f[c]]=g[f[c]]||{};g=g[f[c]]}}return g};